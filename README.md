# BeanMoney - 复式记账iOS应用

## 项目概述

BeanMoney是一款基于复式记账法的iOS记账应用，采用现代SwiftUI框架开发，提供简洁优雅的iOS风格界面。

## 核心理念：复式记账法

### 什么是复式记账？

复式记账法要求每一笔交易都必须同时记录"来源"和"去向"：
- **来源（借）**：钱从哪里来
  - 收入类：工资、借款、投资收益等（使资产增加）
  - 账户类：银行卡、支付宝、微信等

- **去向（贷）**：钱到哪里去
  - 支出类：日常支出、还款等（使资产减少）
  - 账户类：银行卡、支付宝、微信等

### 为什么采用复式记账？

1. **完整的财务脉络**：每笔交易都清晰展示资金的来源和去向
2. **自动平衡**：来源和去向始终相等，保证账目平衡
3. **灵活的账户体系**：同一笔交易可以同时影响多个账户
4. **强大的统计能力**：可以准确计算净资产、收支情况等

## 功能模块

### 1. 账本模块（Ledger）
- **账单列表**：展示所有交易记录
  - 金额、时间、备注
  - 交易来源→去向的可视化展示
- **记一笔**：底部上拉式表单
  - 金额输入
  - 币种选择（支持多币种）
  - 来源选择
  - 去向选择
  - 备注输入
- **智能关联**：自动更新相关账户余额

### 2. 资产模块（Assets）

#### 资产概览卡片
- **净资产** = 总资产 - 总负债
- **总资产**：所有资产账户余额总和
- **总负债**：所有负债账户余额总和

#### 收支统计卡片
- **资产总增加**：所有使资产增加的来源（工资、投资收益等）
- **资产总减少**：所有使资产减少的来源（支出、投资亏损等）

#### 账户体系
1. **流动资产**：支付宝、微信、现金、各银行账户
2. **固定资产**：房产、车辆、电子产品等
3. **信用负债**：信用卡、花呗、贷款等
4. **投资账户**：股票、基金等
5. **外币账户**：外汇、加密货币等（支持自定义汇率）

每个账户显示：图标、名称、金额、备注

### 3. 统计模块（Statistics）
- **时间维度切换**：周、月、年
- **分类统计**：资产增加 / 资产减少
- **可视化图表**：直观展示收支趋势

## 技术架构

### 技术栈
- **语言**：Swift 5.0+
- **框架**：SwiftUI
- **最低版本**：iOS 16.0+
- **数据存储**：Core Data / SwiftData（待定）
- **架构模式**：MVVM

### 项目结构
```
beanmoney/
├── Models/              # 数据模型
│   ├── Transaction.swift      # 交易记录
│   ├── Account.swift          # 账户
│   ├── Category.swift         # 分类
│   └── Currency.swift         # 币种
├── Views/               # 视图
│   ├── Ledger/          # 账本模块
│   ├── Assets/          # 资产模块
│   ├── Statistics/      # 统计模块
│   └── Components/      # 通用组件
├── ViewModels/          # 视图模型
├── Services/            # 服务层
│   ├── DataManager.swift       # 数据管理
│   ├── Calculator.swift        # 计算服务
│   └── CurrencyService.swift   # 汇率服务
└── Resources/           # 资源文件
```

### 核心数据模型设计

#### Transaction（交易）
```swift
- id: UUID
- amount: Decimal
- fromAccount: Account        // 来源账户
- toAccount: Account          // 去向账户
- currency: Currency
- note: String
- createdAt: Date
```

#### Account（账户）
```swift
- id: UUID
- name: String
- type: AccountType          // 账户类型
- balance: Decimal
- currency: Currency
- icon: String
- note: String
- isSystem: Bool             // 是否为系统预设账户
```

#### AccountType（账户类型）
```swift
enum AccountType {
  case income          // 收入（工资、投资收益）
  case expense         // 支出（日常消费）
  case asset           // 资产账户
  case liability       // 负债账户
}
```

## 实现计划

### Phase 1: 基础架构（当前阶段）
- [x] 创建项目基础结构
- [ ] 设计核心数据模型
- [ ] 搭建MVVM架构
- [ ] 实现数据持久化方案

### Phase 2: 核心功能
- [ ] 实现账户管理系统
- [ ] 实现交易记录功能
- [ ] 实现复式记账逻辑
- [ ] 实现自动计算账户余额

### Phase 3: UI界面
- [ ] 账本列表界面
- [ ] 记账表单界面
- [ ] 资产概览界面
- [ ] 账户管理界面
- [ ] 统计图表界面

### Phase 4: 高级功能
- [ ] 多币种支持
- [ ] 汇率管理
- [ ] 导出功能
- [ ] 数据备份

## 设计规范

### iOS设计原则
- **简洁**：最小化UI元素，突出核心内容
- **一致性**：遵循iOS人机交互指南
- **层次感**：使用卡片、阴影营造空间层次
- **色彩**：采用iOS系统色板，保证视觉舒适

### 交互设计
- 使用底部Tab导航：账本、资产、统计
- 记账入口：浮动按钮或底部上拉表单
- 手势支持：下拉刷新、滑动删除等
- 动画流畅：使用SwiftUI默认动画

## 开发规范

### 代码规范
- 遵循Swift标准命名规范
- 使用MARK注释分隔代码块
- 关键逻辑添加注释说明
- 及时重构，保持代码简洁

### Git工作流
- 功能分支开发：feature-xxx
- 提交信息清晰：描述做了什么
- 及时合并，保持主分支稳定

## 下一步行动

1. **创建核心数据模型**
   - Transaction（交易）
   - Account（账户）
   - Category（分类）
   - Currency（币种）

2. **搭建基础UI框架**
   - 主TabView结构
   - 三个主页面占位

3. **实现第一个功能**
   - 账户列表展示
   - 添加账户功能

4. **完善记账流程**
   - 记账表单界面
   - 保存交易记录
   - 自动更新账户余额

---

**开发开始时间**：2026年1月
**开发者**：Claude Code & 用户
**目标版本**：1.0.0
